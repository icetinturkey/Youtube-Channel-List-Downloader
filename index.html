<!DOCTYPE html>
<html>
<body>
<h1>Guild Anatolia Panel Project</h1>
<i><p id="statusDiv"></p></i>
<style>
td,th{
border:1px solid black;
}
</style>
<table style="border:1px solid black;border-collapse:collapse;" id="loadedDiv">
<tr>
<th>Lig Adı</th>
<th>Başlangıç Tarihi</th>
<th>Bitiş Tarihi</th>
<th>URL</th>
</tr>
</table>
</body>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (window.XMLHttpRequest) {xmlhttp=new XMLHttpRequest();}
	else {xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
	xmlhttp.onreadystatechange=function() {
	if (xmlhttp.readyState==4 && xmlhttp.status==200) {
		var obj = JSON.parse(xmlhttp.responseText);
		let count = 0;
		for (var o in obj) {
			count = count + 1;
		}
		document.getElementById("statusDiv").innerHTML = "Object Count="+count;
		for(a=0;a<count;a++){
		var bas_tarih = obj[a].startAt.split('T');
		var bit_tarih = obj[a].startAt.split('T');
		bit_tarih[0]="";
		if (obj[a].endAt !== null) {
			var bit_tarih = obj[a].endAt.split('T');
		}
		document.getElementById("loadedDiv").innerHTML += "<tr><td>"+obj[a].id+"</td><td>"+bas_tarih[0]+"</td><td>"+bit_tarih[0]+"</td><td><a href='"+obj[a].url+"'>"+obj[a].url+"</a></td></tr>";
		}
    }
	}
	xmlhttp.open("GET","https://api.pathofexile.com/leagues?type=main&compact=1",true);
	xmlhttp.send();
      });
  </script>
</html>
